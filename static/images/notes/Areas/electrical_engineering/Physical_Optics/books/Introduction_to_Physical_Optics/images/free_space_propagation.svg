<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="720" height="580" viewBox="0 0 720 580">
  <!-- Background -->
  <rect x="0" y="0" width="720" height="580" fill="#fefefe"/>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#1f2937"/>
    </marker>
    <!-- Hatching pattern for free space region -->
    <pattern id="hatch" patternUnits="userSpaceOnUse" width="12" height="12" patternTransform="rotate(45)">
      <line x1="0" y1="0" x2="0" y2="12" stroke="#94a3b8" stroke-width="1"/>
    </pattern>
  </defs>

  <!-- Title -->
  <text x="360" y="30" font-family="Georgia, serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1f2937">Free Space Propagation</text>

  <!-- ===== TOP DIAGRAM: Physical representation ===== -->

  <!-- z-axis (horizontal) -->
  <line x1="80" y1="140" x2="640" y2="140" stroke="#1f2937" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="655" y="145" font-family="Georgia, serif" font-size="18" font-style="italic" fill="#1f2937">z</text>

  <!-- x-axis (vertical) -->
  <line x1="120" y1="220" x2="120" y2="50" stroke="#1f2937" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="110" y="42" font-family="Georgia, serif" font-size="18" font-style="italic" fill="#1f2937">x</text>

  <!-- Plane at z0 -->
  <line x1="200" y1="70" x2="200" y2="210" stroke="#2563eb" stroke-width="2.5"/>
  <text x="192" y="228" font-family="Georgia, serif" font-size="16" fill="#2563eb">z₀</text>

  <!-- Plane at z1 -->
  <line x1="520" y1="70" x2="520" y2="210" stroke="#2563eb" stroke-width="2.5"/>
  <text x="512" y="228" font-family="Georgia, serif" font-size="16" fill="#2563eb">z₁</text>

  <!-- Hatched free space region between z0 and z1 -->
  <rect x="200" y="85" width="320" height="110" fill="url(#hatch)" opacity="0.6"/>

  <!-- Label for free space region -->
  <text x="360" y="145" font-family="Georgia, serif" font-size="14" text-anchor="middle" fill="#6b7280">Free space region</text>

  <!-- ===== MIDDLE: Block diagram ===== -->

  <!-- Input label and line -->
  <text x="100" y="295" font-family="Georgia, serif" font-size="16" fill="#1f2937">Input</text>
  <text x="100" y="315" font-family="Georgia, serif" font-size="14" fill="#2563eb">z₀</text>
  <line x1="150" y1="305" x2="230" y2="305" stroke="#1f2937" stroke-width="2"/>

  <!-- Free space propagation box -->
  <rect x="230" y="275" width="200" height="60" rx="4" fill="#eff6ff" stroke="#2563eb" stroke-width="2"/>
  <text x="330" y="300" font-family="Georgia, serif" font-size="15" text-anchor="middle" fill="#1f2937">Free space</text>
  <text x="330" y="320" font-family="Georgia, serif" font-size="15" text-anchor="middle" fill="#1f2937">propagation</text>

  <!-- Output line and label -->
  <line x1="430" y1="305" x2="510" y2="305" stroke="#1f2937" stroke-width="2"/>
  <text x="530" y="295" font-family="Georgia, serif" font-size="16" fill="#1f2937">Output</text>
  <text x="530" y="315" font-family="Georgia, serif" font-size="14" fill="#2563eb">z₁</text>

  <!-- ===== BOTTOM: Field equations ===== -->

  <!-- Plane wave equation -->
  <rect x="40" y="360" width="640" height="45" rx="5" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
  <text x="60" y="388" font-family="Georgia, serif" font-size="14" fill="#6b7280">Plane wave:</text>
  <text x="175" y="388" font-family="Georgia, serif" font-size="15" fill="#1f2937">û(x,y,z) = A exp[j(k(γₓx + γᵧy + γᵤz) + φ)]</text>

  <!-- Input field equation -->
  <rect x="40" y="415" width="640" height="45" rx="5" fill="#eff6ff" stroke="#2563eb" stroke-width="1.5"/>
  <text x="60" y="443" font-family="Georgia, serif" font-size="14" fill="#2563eb">Input field (z = z₀):</text>
  <text x="210" y="443" font-family="Georgia, serif" font-size="15" fill="#1f2937">û(x,y,z₀) = A e</text>
  <text x="323" y="438" font-family="Georgia, serif" font-size="11" fill="#1f2937">jφ</text>
  <text x="340" y="443" font-family="Georgia, serif" font-size="15" fill="#1f2937">· e</text>
  <text x="365" y="438" font-family="Georgia, serif" font-size="11" fill="#1f2937">jkγᵤz₀</text>
  <text x="410" y="443" font-family="Georgia, serif" font-size="15" fill="#1f2937">· e</text>
  <text x="435" y="438" font-family="Georgia, serif" font-size="11" fill="#1f2937">jk(γₓx + γᵧy)</text>

  <!-- Output field equation -->
  <rect x="40" y="470" width="640" height="45" rx="5" fill="#f0fdf4" stroke="#059669" stroke-width="1.5"/>
  <text x="60" y="498" font-family="Georgia, serif" font-size="14" fill="#059669">Output field (z = z₁):</text>
  <text x="210" y="498" font-family="Georgia, serif" font-size="15" fill="#1f2937">û(x,y,z₁) = A e</text>
  <text x="323" y="493" font-family="Georgia, serif" font-size="11" fill="#1f2937">jφ</text>
  <text x="340" y="498" font-family="Georgia, serif" font-size="15" fill="#1f2937">· e</text>
  <text x="365" y="493" font-family="Georgia, serif" font-size="11" fill="#059669" font-weight="bold">jkγᵤz₁</text>
  <text x="410" y="498" font-family="Georgia, serif" font-size="15" fill="#1f2937">· e</text>
  <text x="435" y="493" font-family="Georgia, serif" font-size="11" fill="#1f2937">jk(γₓx + γᵧy)</text>

  <!-- Annotation: what changes -->
  <text x="360" y="545" font-family="Georgia, serif" font-size="12" text-anchor="middle" fill="#6b7280">
    Only the z-dependent phase factor changes: e
  </text>
  <text x="478" y="540" font-family="Georgia, serif" font-size="9" fill="#6b7280">jkγᵤz₀</text>
  <text x="512" y="545" font-family="Georgia, serif" font-size="12" fill="#6b7280">→ e</text>
  <text x="538" y="540" font-family="Georgia, serif" font-size="9" fill="#6b7280">jkγᵤz₁</text>
  <text x="360" y="565" font-family="Georgia, serif" font-size="12" text-anchor="middle" fill="#6b7280">
    Transverse pattern e
  </text>
  <text x="432" y="560" font-family="Georgia, serif" font-size="9" fill="#6b7280">jk(γₓx + γᵧy)</text>
  <text x="502" y="565" font-family="Georgia, serif" font-size="12" fill="#6b7280">stays identical (eigenfunction property)</text>

  <style>
    line, path { stroke-linecap: round; stroke-linejoin: round; }
  </style>
</svg>
