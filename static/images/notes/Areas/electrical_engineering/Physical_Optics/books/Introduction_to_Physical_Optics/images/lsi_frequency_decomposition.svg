<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="520" viewBox="0 0 800 520">
  <!-- Background -->
  <rect x="0" y="0" width="800" height="520" fill="#fefefe"/>

  <!-- Arrow marker definitions -->
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#1f2937"/>
    </marker>
    <marker id="arrow-blue" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#2563eb"/>
    </marker>
    <marker id="arrow-green" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#059669"/>
    </marker>
    <marker id="arrow-orange" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#ea580c"/>
    </marker>
    <marker id="arrow-red" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#dc2626"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="30" font-family="Georgia, serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1f2937">
    Frequency Decomposition Through an LSI System
  </text>

  <!-- ===== LEFT SIDE: Input Signal ===== -->

  <!-- Input signal box -->
  <rect x="30" y="60" width="120" height="80" rx="6" fill="#eff6ff" stroke="#2563eb" stroke-width="2"/>

  <!-- Complex waveform inside (sum of frequencies) -->
  <path d="M 45 100 Q 55 80, 65 95 Q 75 110, 85 85 Q 95 60, 105 90 Q 115 120, 125 95 Q 135 70, 140 100"
        fill="none" stroke="#2563eb" stroke-width="2.5"/>

  <text x="90" y="155" font-family="Georgia, serif" font-size="14" font-style="italic" text-anchor="middle" fill="#2563eb">g₁(x)</text>
  <text x="90" y="172" font-family="Georgia, serif" font-size="11" text-anchor="middle" fill="#6b7280">Input signal</text>

  <!-- Arrow from input to decomposition -->
  <line x1="150" y1="100" x2="185" y2="100" stroke="#1f2937" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- ===== DECOMPOSITION: Fourier Transform ===== -->

  <rect x="190" y="55" width="70" height="90" rx="4" fill="#f3f4f6" stroke="#9ca3af" stroke-width="1.5"/>
  <text x="225" y="95" font-family="Georgia, serif" font-size="16" text-anchor="middle" fill="#1f2937">ℱ</text>
  <text x="225" y="115" font-family="Georgia, serif" font-size="10" text-anchor="middle" fill="#6b7280">decompose</text>

  <!-- ===== MIDDLE: Frequency Channels ===== -->

  <!-- Branching arrows from decomposition -->
  <path d="M 260 85 L 290 85 L 320 180" fill="none" stroke="#dc2626" stroke-width="2" marker-end="url(#arrow-red)"/>
  <path d="M 260 100 L 320 280" fill="none" stroke="#ea580c" stroke-width="2" marker-end="url(#arrow-orange)"/>
  <path d="M 260 115 L 290 115 L 320 380" fill="none" stroke="#059669" stroke-width="2" marker-end="url(#arrow-green)"/>

  <!-- LOW FREQUENCY CHANNEL (f₁) -->
  <rect x="325" y="155" width="180" height="60" rx="5" fill="#fef2f2" stroke="#dc2626" stroke-width="2"/>

  <!-- Slow wave inside -->
  <path d="M 340 185 Q 370 165, 400 185 Q 430 205, 460 185 Q 480 172, 490 185"
        fill="none" stroke="#dc2626" stroke-width="2"/>

  <text x="415" y="175" font-family="Georgia, serif" font-size="11" text-anchor="middle" fill="#dc2626">Low freq f₁</text>

  <!-- Multiplication by H(f₁) -->
  <text x="520" y="185" font-family="Georgia, serif" font-size="14" text-anchor="middle" fill="#1f2937">×H(f₁)</text>

  <!-- MEDIUM FREQUENCY CHANNEL (f₂) -->
  <rect x="325" y="255" width="180" height="60" rx="5" fill="#fff7ed" stroke="#ea580c" stroke-width="2"/>

  <!-- Medium wave inside -->
  <path d="M 340 285 Q 355 268, 370 285 Q 385 302, 400 285 Q 415 268, 430 285 Q 445 302, 460 285 Q 475 268, 490 285"
        fill="none" stroke="#ea580c" stroke-width="2"/>

  <text x="415" y="275" font-family="Georgia, serif" font-size="11" text-anchor="middle" fill="#ea580c">Med freq f₂</text>

  <!-- Multiplication by H(f₂) -->
  <text x="520" y="285" font-family="Georgia, serif" font-size="14" text-anchor="middle" fill="#1f2937">×H(f₂)</text>

  <!-- HIGH FREQUENCY CHANNEL (f₃) -->
  <rect x="325" y="355" width="180" height="60" rx="5" fill="#ecfdf5" stroke="#059669" stroke-width="2"/>

  <!-- Fast wave inside -->
  <path d="M 340 385 Q 347 372, 354 385 Q 361 398, 368 385 Q 375 372, 382 385 Q 389 398, 396 385 Q 403 372, 410 385 Q 417 398, 424 385 Q 431 372, 438 385 Q 445 398, 452 385 Q 459 372, 466 385 Q 473 398, 480 385 Q 487 372, 490 385"
        fill="none" stroke="#059669" stroke-width="2"/>

  <text x="415" y="375" font-family="Georgia, serif" font-size="11" text-anchor="middle" fill="#059669">High freq f₃</text>

  <!-- Multiplication by H(f₃) -->
  <text x="520" y="385" font-family="Georgia, serif" font-size="14" text-anchor="middle" fill="#1f2937">×H(f₃)</text>

  <!-- Arrows from channels to recombination -->
  <line x1="555" y1="185" x2="590" y2="185" stroke="#dc2626" stroke-width="2"/>
  <line x1="555" y1="285" x2="590" y2="285" stroke="#ea580c" stroke-width="2"/>
  <line x1="555" y1="385" x2="590" y2="385" stroke="#059669" stroke-width="2"/>

  <!-- Converging arrows -->
  <path d="M 590 185 L 610 185 L 640 270" fill="none" stroke="#dc2626" stroke-width="2"/>
  <path d="M 590 285 L 640 285" fill="none" stroke="#ea580c" stroke-width="2"/>
  <path d="M 590 385 L 610 385 L 640 300" fill="none" stroke="#059669" stroke-width="2"/>

  <!-- ===== RECOMBINATION: Inverse Fourier Transform ===== -->

  <rect x="645" y="240" width="70" height="90" rx="4" fill="#f3f4f6" stroke="#9ca3af" stroke-width="1.5"/>
  <text x="680" y="275" font-family="Georgia, serif" font-size="14" text-anchor="middle" fill="#1f2937">ℱ⁻¹</text>
  <text x="680" y="295" font-family="Georgia, serif" font-size="10" text-anchor="middle" fill="#6b7280">recombine</text>
  <text x="680" y="310" font-family="Georgia, serif" font-size="9" text-anchor="middle" fill="#6b7280">(sum)</text>

  <!-- Arrow to output -->
  <line x1="715" y1="285" x2="725" y2="285" stroke="#1f2937" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- ===== RIGHT SIDE: Output Signal ===== -->

  <rect x="730" y="245" width="60" height="80" rx="6" fill="#f0fdf4" stroke="#059669" stroke-width="2"/>

  <!-- Modified waveform (similar but scaled) -->
  <path d="M 738 285 Q 745 270, 752 280 Q 759 290, 766 275 Q 773 260, 780 278"
        fill="none" stroke="#059669" stroke-width="2.5"/>

  <text x="760" y="340" font-family="Georgia, serif" font-size="14" font-style="italic" text-anchor="middle" fill="#059669">g₂(x)</text>
  <text x="760" y="357" font-family="Georgia, serif" font-size="11" text-anchor="middle" fill="#6b7280">Output</text>

  <!-- ===== BOTTOM: Key equation ===== -->

  <rect x="200" y="450" width="400" height="55" rx="6" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1.5"/>

  <text x="400" y="475" font-family="Georgia, serif" font-size="13" text-anchor="middle" fill="#1f2937">
    Each frequency component scaled independently:
  </text>
  <text x="400" y="495" font-family="Georgia, serif" font-size="15" font-style="italic" text-anchor="middle" fill="#374151">
    G₂(f) = G₁(f) · H(f)
  </text>

  <!-- ===== ANNOTATIONS ===== -->

  <!-- "eigenfunction" label -->
  <text x="415" y="440" font-family="Georgia, serif" font-size="11" text-anchor="middle" fill="#6b7280">
    Complex exponentials are eigenfunctions — pass through unchanged in form
  </text>

  <style>
    line, path { stroke-linecap: round; stroke-linejoin: round; }
  </style>
</svg>
